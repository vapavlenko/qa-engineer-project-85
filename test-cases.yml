---
- summary: |
    Регистрация пользователя через GitHub
  requirement: |
    При входе в существующий GitHub регистрация проходит успешно
  prerequisites: |
    Есть зарегистрированный аккаунт GitHub
    Открыта страница "SignUp"
  test-data: |
    Наш GitHub
  steps:
    - Нажать "SignUp with GitHub"
    - Дать разрешение на вход с помощью GitHub
  expected-result: |
    Отображается уведомление "Successfully authenticated" и происходит переход на главную страницу сайта.

- summary: |
    Проверка входа пользователя с несуществующими логином и паролем
  requirement: |
    При неправильном логине или пароле пользователь должен получить сообщение об ошибке
  prerequisites: |
    Открыта страница "Sign In"
  test-data: |
    Почта = ivanov@mail.com Пароль = Ivan_Ivanov
  steps:
    - Ввести почту
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь получает сообщение об ошибке.

- summary: |
    Создание игры с ботом
  requirement: |
    Игра должна успешно создаться, бот напишет сообщение в чат
  prerequisites: |
    Авторизация выполнена
    Открыта главная страница
  test-data: |
    Любой аккаунт
  steps:
    - Нажать "Create a game"
    - Выбрать уровень сложности
    - Установить Game type = with a bot
    - Остальные параметры оставить по умолчанию
    - Нажать "Create battle"
  expected-result: |
    Создаётся игра с ботом по выбранным настройкам, бот пишет в чат.

- summary: |
    Регистрация пользователя через email
  requirement: |
    При вводе уникального email регистрация проходит успешно
  prerequisites: |
    Открыта страница "SignUp"
  test-data: |
    Почта = test123@mail.com Пароль = Test_12345
  steps:
    - Ввести email
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь зарегистрирован и перенаправлен на главную страницу.

- summary: |
    Проверка невозможности регистрации с уже существующей почтой
  requirement: |
    При вводе email, который уже зарегистрирован, должна появляться ошибка
  prerequisites: |
    Открыта страница "SignUp"
    В базе уже есть пользователь с почтой test123@mail.com
  test-data: |
    Почта = test123@mail.com Пароль = New_password
  steps:
    - Ввести email
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь получает сообщение об ошибке о существующем аккаунте.

- summary: |
    Проверка невозможности регистрации с некорректной почтой
  requirement: |
    Система не должна допустить регистрацию с некорректным email
  prerequisites: |
    Открыта страница "SignUp"
  test-data: |
    Почта = ivanov@@ Пароль = Qwerty_123
  steps:
    - Ввести некорректный email
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь получает сообщение об ошибке о неверном формате email.

- summary: |
    Успешная авторизация через email и пароль
  requirement: |
    При вводе корректных данных пользователь должен войти
  prerequisites: |
    Существует зарегистрированный пользователь
    Открыта страница "Sign In"
  test-data: |
    Почта = test123@mail.com Пароль = Test_12345
  steps:
    - Ввести email
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно вошёл и перенаправлен на главную страницу.

- summary: |
    Успешная авторизация через Discord
  requirement: |
    При корректных данных Discord вход должен быть успешным
  prerequisites: |
    Есть зарегистрированный аккаунт Discord
    Открыта страница "Sign In"
  test-data: |
    Аккаунт Discord
  steps:
    - Нажать "SignIn with Discord"
    - Дать разрешение на вход с помощью Discord
  expected-result: |
    Пользователь успешно авторизован и перенаправлен на главную страницу.

- summary: |
    Создание игры с другим игроком (публичная игра)
  requirement: |
    При создании публичной игры она должна быть доступна другим пользователям для подключения
  prerequisites: |
    Авторизация выполнена
    Открыта главная страница
  test-data: |
    Аккаунт пользователя
  steps:
    - Нажать "Create a game"
    - Выбрать тип игры "public"
    - Нажать "Create battle"
  expected-result: |
    Игра создана и отображается в списке доступных для подключения.

- summary: |
    Создание игры с таймером
  requirement: |
    При истечении таймера игрок, не сдавший решение, автоматически проигрывает
  prerequisites: |
    Авторизация выполнена
    Открыта главная страница
  test-data: |
    Таймер = 10 минут
  steps:
    - Нажать "Create a game"
    - Установить таймер = 10 минут
    - Нажать "Create battle"
    - Подождать окончания времени без сдачи решения
  expected-result: |
    Игрок, не сдавший решение в срок, получает поражение.

- summary: |
    Отправка приглашения другу
  requirement: |
    Пользователь может пригласить друга в игру
  prerequisites: |
    Авторизация выполнена
    Друг в сети
  test-data: |
    Аккаунт друга
  steps:
    - Нажать "Create a game"
    - Выбрать тип игры "with a friend"
    - Выбрать друга
    - Нажать "Create battle"
  expected-result: |
    Друг получает приглашение и может принять его.

- summary: |
    Подключение второго игрока к публичной игре
  requirement: |
    Второй игрок может подключиться к доступной игре
  prerequisites: |
    Существует созданная публичная игра
    Второй игрок авторизован
  test-data: |
    Аккаунт второго игрока
  steps:
    - Открыть список доступных игр
    - Нажать "Connect to game"
  expected-result: |
    Игрок подключается к игре, оба попадают в редактор.

- summary: |
    Отображение редакторов игроков
  requirement: |
    Каждый игрок должен видеть свой редактор и редактор соперника
  prerequisites: |
    Игра создана, два игрока подключены
  test-data: |
    Любые аккаунты
  steps:
    - Начать игру
  expected-result: |
    Игрок видит свой редактор слева и редактор соперника справа.

- summary: |
    Работа чата во время игры
  requirement: |
    Игроки должны иметь возможность переписываться в чате
  prerequisites: |
    Оба игрока подключены к игре
  test-data: |
    Сообщение = "Hello"
  steps:
    - Игрок 1 пишет сообщение в чат
  expected-result: |
    Сообщение отображается у обоих игроков.

- summary: |
    Проверка решения кнопкой "check"
  requirement: |
    Игрок может проверять решение неограниченное количество раз
  prerequisites: |
    Оба игрока подключены к игре
  test-data: |
    Код игрока = неправильное решение
  steps:
    - Ввести код
    - Нажать "check"
  expected-result: |
    Отображается результат проверки, решение неверное.

- summary: |
    Сохранение кода при повторном входе
  requirement: |
    Игрок должен увидеть свой код при переподключении в игру
  prerequisites: |
    Игрок подключён к игре, ввёл часть кода
  test-data: |
    Код игрока = неполное решение
  steps:
    - Выйти из игры
    - Снова войти в эту же игру
  expected-result: |
    В редакторе отображается ранее введённый код.

- summary: |
    Победа игрока
  requirement: |
    При правильном решении игра завершается и отображается победитель
  prerequisites: |
    Два игрока подключены к игре
  test-data: |
    Правильное решение задачи
  steps:
    - Игрок вводит правильный код
    - Нажимает "check"
  expected-result: |
    Отображается модальное окно с результатом и именем победителя.

- summary: |
    Поражение игрока
  requirement: |
    Игрок, который не решил задачу первым, получает поражение
  prerequisites: |
    Два игрока подключены к игре
  test-data: |
    Игрок 2 решение не сдал
  steps:
    - Игрок 1 сдаёт правильное решение
  expected-result: |
    У игрока 2 отображается модальное окно с поражением.

- summary: |
    Выход победителя из игры
  requirement: |
    После победы у игрока появляется кнопка "exit", и он может выйти
  prerequisites: |
    Игрок победил в игре
  test-data: |
    Нет
  steps:
    - Нажать кнопку "exit"
  expected-result: |
    Игрок выходит из игры, кнопка "check" у него становится неактивна.

- summary: |
    Возможность доиграть после поражения
  requirement: |
    Проигравший игрок может продолжать писать код после поражения
  prerequisites: |
    Игрок проиграл
  test-data: |
    Любое решение
  steps:
    - Продолжить писать код
  expected-result: |
    Игрок может просмотреть свой код, игра продолжается для него, кнопка "check" неактивна.

- summary: |
    Смена языка задания
  requirement: |
    Пользователь может изменить язык задания в игре
  prerequisites: |
    Игра запущена
  test-data: |
    Язык = "Ru"
  steps:
    - В разделе "Task" нажать на иконку языка
    - Выбрать "Ru"
  expected-result: |
    Задание отображается на русском, интерфейс не меняется.

- summary: |
    Смена языка программирования
  requirement: |
    Пользователь может поменять язык программирования в игре
  prerequisites: |
    Игра запущена
  test-data: |
    Выбор языка = Python
  steps:
    - Нажать на язык в редакторе
    - Выбрать Python
  expected-result: |
    Язык меняется, ранее введённый код отображается на выбранном языке.

- summary: |
    Просмотр истории матчей
  requirement: |
    Пользователь может просмотреть историю своих матчей
  prerequisites: |
    Авторизация выполнена
  test-data: |
    Нет
  steps:
    - Нажать "History" на главной странице
  expected-result: |
    Отображается список матчей, имена игроков и результаты.

- summary: |
    Тестирование мобильной версии
  requirement: |
    Сайт корректно отображается на мобильных устройствах
  prerequisites: |
    Устройство: iPhone 15 Pro, iOS 18.6
  test-data: |
    Сайт: https://codebattle.hexlet.io
  steps:
    - Открыть Safari
    - Перейти на сайт
    - Авторизоваться
    - Создать тестовую игру
    - Отправить сообщение в чат
  expected-result: |
    Все элементы корректно отображаются, чат работает, игра создаётся.

- summary: |
    Тестирование совместимости с Google Chrome
  requirement: |
    Сайт корректно работает в последней версии Google Chrome
  prerequisites: |
    Установлен Google Chrome
  test-data: |
    Сайт: https://codebattle.hexlet.io
  steps:
    - Открыть Google Chrome
    - Перейти на сайт
    - Авторизоваться
    - Создать игру
  expected-result: |
    Сайт корректно работает, интерфейс отображается верно.

- summary: |
    Тестирование совместимости с Mozilla Firefox
  requirement: |
    Сайт корректно работает в последней версии Mozilla Firefox
  prerequisites: |
    Установлен Mozilla Firefox
  test-data: |
    Сайт: https://codebattle.hexlet.io
  steps:
    - Открыть Mozilla Firefox
    - Перейти на сайт
    - Авторизоваться
    - Создать игру
  expected-result: |
    Сайт корректно работает, интерфейс отображается верно.

- summary: |
    Тестирование совместимости с Safari
  requirement: |
    Сайт корректно работает в последней версии Safari
  prerequisites: |
    Установлен Safari
  test-data: |
    Сайт: https://codebattle.hexlet.io
  steps:
    - Открыть Safari
    - Перейти на сайт
    - Авторизоваться
    - Создать игру
  expected-result: |
    Сайт корректно работает, интерфейс отображается верно.

- summary: |
    Тестирование совместимости с Microsoft Edge
  requirement: |
    Сайт корректно работает в последней версии Microsoft Edge
  prerequisites: |
    Установлен Edge
  test-data: |
    Сайт: https://codebattle.hexlet.io
  steps:
    - Открыть Edge
    - Перейти на сайт
    - Авторизоваться
    - Создать игру
  expected-result: |
    Сайт корректно работает, интерфейс отображается верно.

- summary: |
    Тестирование совместимости с Opera
  requirement: |
    Сайт корректно работает в последней версии Opera
  prerequisites: |
    Установлен Opera
  test-data: |
    Сайт: https://codebattle.hexlet.io
  steps:
    - Открыть Opera
    - Перейти на сайт
    - Авторизоваться
    - Создать игру
  expected-result: |
    Сайт корректно работает, интерфейс отображается верно.
